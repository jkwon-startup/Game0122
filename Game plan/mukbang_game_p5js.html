<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ” ë¨¹ë°© ê²Œì„ - p5.js</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            background: linear-gradient(135deg, #ff6b6b 0%, #feca57 50%, #48dbfb 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            animation: bgShift 10s ease infinite;
        }
        @keyframes bgShift {
            0%, 100% { background: linear-gradient(135deg, #ff6b6b 0%, #feca57 50%, #48dbfb 100%); }
            50% { background: linear-gradient(135deg, #a55eea 0%, #fd79a8 50%, #fdcb6e 100%); }
        }
        h1 {
            color: white;
            text-shadow: 3px 3px 0px #ff6b6b, 6px 6px 0px #feca57;
            margin-bottom: 10px;
            font-size: 2.5em;
            animation: bounce 1s ease infinite;
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        #game-container {
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 50px rgba(0,0,0,0.4), 0 0 30px rgba(255,255,255,0.3);
            border: 5px solid white;
        }
        .info {
            color: white;
            margin-top: 15px;
            text-align: center;
            background: rgba(255,255,255,0.2);
            padding: 15px 25px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>ğŸ” ë¨¹ë°© ê²Œì„ ğŸ•</h1>
    <div id="game-container"></div>
    <div class="info">
        <p>âŒ¨ï¸ ì¡°ì‘: â† â†’ ë°©í–¥í‚¤ ë˜ëŠ” A, D í‚¤</p>
    </div>

    <script>
        // ============================================
        // ğŸ® ë¨¹ë°© ê²Œì„ (Mukbang Game) - p5.js ë²„ì „
        // âœ¨ í™”ë ¤í•œ ê·¸ë˜í”½ ì—…ê·¸ë ˆì´ë“œ ë²„ì „
        // ============================================

        // ğŸ“Š ê²Œì„ ì„¤ì • ìƒìˆ˜
        const CANVAS_WIDTH = 400;
        const CANVAS_HEIGHT = 600;
        const PLAYER_SIZE = 60;
        const PLAYER_SPEED = 10;
        const ITEM_SIZE = 45;
        const GAME_TIME = 60;
        const SPAWN_INTERVAL = 700;

        // ğŸ¨ í™”ë ¤í•œ ìƒ‰ìƒ ì„¤ì •
        const COLORS = {
            background1: '#1a1a2e',
            background2: '#16213e',
            background3: '#0f3460',
            text: '#ffffff',
            score: '#ffd700',
            life: '#ff6b6b',
            time: '#4ecdc4',
            rainbow: ['#ff6b6b', '#feca57', '#48dbfb', '#ff9ff3', '#54a0ff', '#5f27cd']
        };

        // ğŸ• ì•„ì´í…œ ì •ì˜
        const ITEM_TYPES = {
            pizza:   { emoji: 'ğŸ•', score: 10,  probability: 40, speed: 3, color: '#feca57' },
            burger:  { emoji: 'ğŸ”', score: 20,  probability: 30, speed: 4, color: '#ff9f43' },
            chicken: { emoji: 'ğŸ—', score: 30,  probability: 20, speed: 5, color: '#ee5a24' },
            star:    { emoji: 'â­', score: 100, probability: 5,  speed: 6, color: '#f9ca24' },
            bomb:    { emoji: 'ğŸ’£', score: -1,  probability: 5,  speed: 4, color: '#636e72' }
        };

        // ğŸ† ë“±ê¸‰ ì‹œìŠ¤í…œ
        const GRADES = [
            { min: 500, grade: 'ğŸ‘‘', title: 'ì „ì„¤ì˜ ëŒ€ì‹ê°€', message: 'ë¨¹ë°©ì˜ ì‹ ì´ ê°•ë¦¼í–ˆë‹¤!', color: '#f9ca24' },
            { min: 300, grade: 'ğŸ¥‡', title: 'ë¨¹ë°© ìŠ¤íƒ€', message: 'ëŒ€ë‹¨í•´!', color: '#ffd700' },
            { min: 100, grade: 'ğŸ¥ˆ', title: 'ë¨¹ë°© ìœ ë§ì£¼', message: 'ì œë²•ì¸ë°?', color: '#c0c0c0' },
            { min: 0,   grade: 'ğŸ¥‰', title: 'ë°°ê³ í”ˆ ì´ˆë³´', message: 'ë” ì—´ì‹¬íˆ ë¨¹ì–´ë³´ì!', color: '#cd7f32' }
        ];

        // ğŸ“¦ ê²Œì„ ìƒíƒœ ë³€ìˆ˜
        let gameState = 'start';
        let score = 0;
        let life = 3;
        let timeLeft = GAME_TIME;
        let playerX;
        let items = [];
        let particles = [];
        let stars = [];
        let lastSpawnTime = 0;
        let lastSecondTime = 0;
        let rainbowOffset = 0;
        let floatingEmojis = [];

        // ë²„íŠ¼ ì˜ì—­
        let startBtn, quitBtn, restartBtn, quitBtnGame;

        // ============================================
        // ğŸ¬ p5.js ê¸°ë³¸ í•¨ìˆ˜
        // ============================================

        function setup() {
            let canvas = createCanvas(CANVAS_WIDTH, CANVAS_HEIGHT);
            canvas.parent('game-container');
            textAlign(CENTER, CENTER);
            playerX = width / 2;

            // ë°°ê²½ ë³„ ìƒì„±
            for (let i = 0; i < 50; i++) {
                stars.push({
                    x: random(width),
                    y: random(height),
                    size: random(1, 4),
                    twinkle: random(0.02, 0.05)
                });
            }

            // ë²„íŠ¼ ìœ„ì¹˜ ì„¤ì •
            startBtn = { x: width/2, y: height/2 + 20, w: 200, h: 60 };
            quitBtn = { x: width/2, y: height/2 + 100, w: 200, h: 50 };
            restartBtn = { x: width/2, y: height - 150, w: 200, h: 60 };
            quitBtnGame = { x: width - 50, y: 25, w: 80, h: 35 };
        }

        function draw() {
            rainbowOffset += 0.02;

            switch(gameState) {
                case 'start':
                    drawStartScreen();
                    break;
                case 'playing':
                    updateGame();
                    drawGame();
                    break;
                case 'gameover':
                    drawGameOverScreen();
                    break;
            }

            // íŒŒí‹°í´ ì—…ë°ì´íŠ¸
            updateParticles();
        }

        // ============================================
        // âœ¨ íŒŒí‹°í´ ì‹œìŠ¤í…œ
        // ============================================

        function createParticles(x, y, color, count) {
            for (let i = 0; i < count; i++) {
                particles.push({
                    x: x,
                    y: y,
                    vx: random(-5, 5),
                    vy: random(-8, -2),
                    size: random(5, 15),
                    color: color,
                    life: 1,
                    decay: random(0.02, 0.05),
                    emoji: random(['âœ¨', 'ğŸŒŸ', 'ğŸ’«', 'â­'])
                });
            }
        }

        function createScorePopup(x, y, points) {
            particles.push({
                x: x,
                y: y,
                vx: 0,
                vy: -2,
                size: 24,
                color: points > 0 ? '#ffd700' : '#ff6b6b',
                life: 1,
                decay: 0.02,
                text: (points > 0 ? '+' : '') + points,
                isText: true
            });
        }

        function updateParticles() {
            for (let i = particles.length - 1; i >= 0; i--) {
                let p = particles[i];
                p.x += p.vx;
                p.y += p.vy;
                p.vy += 0.2;
                p.life -= p.decay;

                if (p.life <= 0) {
                    particles.splice(i, 1);
                }
            }
        }

        function drawParticles() {
            for (let p of particles) {
                if (p.isText) {
                    textSize(p.size);
                    fill(red(color(p.color)), green(color(p.color)), blue(color(p.color)), p.life * 255);
                    text(p.text, p.x, p.y);
                } else {
                    textSize(p.size * p.life);
                    fill(255, 255, 255, p.life * 255);
                    text(p.emoji, p.x, p.y);
                }
            }
        }

        // ============================================
        // ğŸŒˆ ë°°ê²½ ê·¸ë¦¬ê¸°
        // ============================================

        function drawAnimatedBackground() {
            // ê·¸ë¼ë°ì´ì…˜ ë°°ê²½
            for (let i = 0; i < height; i++) {
                let inter = map(i, 0, height, 0, 1);
                let c1 = color('#1a1a2e');
                let c2 = color('#16213e');
                let c3 = color('#0f3460');
                let c;
                if (inter < 0.5) {
                    c = lerpColor(c1, c2, inter * 2);
                } else {
                    c = lerpColor(c2, c3, (inter - 0.5) * 2);
                }
                stroke(c);
                line(0, i, width, i);
            }

            // ë°˜ì§ì´ëŠ” ë³„
            noStroke();
            for (let star of stars) {
                let brightness = (sin(frameCount * star.twinkle) + 1) / 2;
                fill(255, 255, 255, brightness * 200);
                ellipse(star.x, star.y, star.size);
            }
        }

        function drawRainbowBorder() {
            noFill();
            strokeWeight(4);
            for (let i = 0; i < 6; i++) {
                let c = color(COLORS.rainbow[(i + floor(rainbowOffset * 10)) % 6]);
                stroke(red(c), green(c), blue(c), 150);
                rect(i * 2, i * 2, width - i * 4, height - i * 4, 10);
            }
        }

        // ============================================
        // ğŸ® ê²Œì„ ë¡œì§ í•¨ìˆ˜
        // ============================================

        function startGame() {
            gameState = 'playing';
            score = 0;
            life = 3;
            timeLeft = GAME_TIME;
            playerX = width / 2;
            items = [];
            particles = [];
            lastSpawnTime = millis();
            lastSecondTime = millis();
        }

        function updateGame() {
            // â±ï¸ íƒ€ì´ë¨¸ ì—…ë°ì´íŠ¸
            if (millis() - lastSecondTime >= 1000) {
                timeLeft--;
                lastSecondTime = millis();
                if (timeLeft <= 0) {
                    gameState = 'gameover';
                    createParticles(width/2, height/2, '#ffd700', 30);
                    return;
                }
            }

            // ğŸ¹ í‚¤ë³´ë“œ ì…ë ¥ ì²˜ë¦¬
            if (keyIsDown(LEFT_ARROW) || keyIsDown(65)) {
                playerX -= PLAYER_SPEED;
            }
            if (keyIsDown(RIGHT_ARROW) || keyIsDown(68)) {
                playerX += PLAYER_SPEED;
            }

            // ğŸš§ í™”ë©´ ê²½ê³„ ì²˜ë¦¬
            playerX = constrain(playerX, PLAYER_SIZE/2, width - PLAYER_SIZE/2);

            // ğŸ• ì•„ì´í…œ ìƒì„±
            if (millis() - lastSpawnTime >= SPAWN_INTERVAL) {
                spawnItem();
                lastSpawnTime = millis();
            }

            // ğŸ“¦ ì•„ì´í…œ ì—…ë°ì´íŠ¸ ë° ì¶©ëŒ ê°ì§€
            for (let i = items.length - 1; i >= 0; i--) {
                let item = items[i];

                // ì•„ì´í…œ ì´ë™ (ë¬¼ê²° íš¨ê³¼)
                item.y += item.speed;
                item.wobble += 0.1;
                item.displayX = item.x + sin(item.wobble) * 5;

                // ì¶©ëŒ ê°ì§€
                if (checkCollision(item)) {
                    if (item.type === 'bomb') {
                        life--;
                        createParticles(item.displayX, item.y, '#ff6b6b', 15);
                        createScorePopup(item.displayX, item.y, -1);
                        if (life <= 0) {
                            gameState = 'gameover';
                            return;
                        }
                    } else {
                        score += item.score;
                        createParticles(item.displayX, item.y, item.color, 10);
                        createScorePopup(item.displayX, item.y, item.score);
                    }
                    items.splice(i, 1);
                    continue;
                }

                // í™”ë©´ ë°–ìœ¼ë¡œ ë‚˜ê°„ ì•„ì´í…œ ì‚­ì œ
                if (item.y > height + ITEM_SIZE) {
                    items.splice(i, 1);
                }
            }
        }

        function spawnItem() {
            let itemType = getRandomItemType();
            let itemData = ITEM_TYPES[itemType];

            items.push({
                type: itemType,
                emoji: itemData.emoji,
                score: itemData.score,
                speed: itemData.speed,
                color: itemData.color,
                x: random(ITEM_SIZE, width - ITEM_SIZE),
                displayX: 0,
                y: -ITEM_SIZE,
                wobble: random(TWO_PI),
                rotation: 0
            });
        }

        function getRandomItemType() {
            let rand = random(100);
            let cumulative = 0;

            for (let type in ITEM_TYPES) {
                cumulative += ITEM_TYPES[type].probability;
                if (rand < cumulative) {
                    return type;
                }
            }
            return 'pizza';
        }

        function checkCollision(item) {
            let playerLeft = playerX - PLAYER_SIZE/2;
            let playerRight = playerX + PLAYER_SIZE/2;
            let playerTop = height - 90 - PLAYER_SIZE/2;
            let playerBottom = height - 90 + PLAYER_SIZE/2;

            let itemLeft = item.displayX - ITEM_SIZE/2;
            let itemRight = item.displayX + ITEM_SIZE/2;
            let itemTop = item.y - ITEM_SIZE/2;
            let itemBottom = item.y + ITEM_SIZE/2;

            return playerRight > itemLeft &&
                   playerLeft < itemRight &&
                   playerBottom > itemTop &&
                   playerTop < itemBottom;
        }

        function getGrade() {
            for (let g of GRADES) {
                if (score >= g.min) return g;
            }
            return GRADES[GRADES.length - 1];
        }

        // ============================================
        // ğŸ¨ í™”ë©´ ê·¸ë¦¬ê¸° í•¨ìˆ˜
        // ============================================

        function drawStartScreen() {
            drawAnimatedBackground();
            drawRainbowBorder();

            // ë– ë‹¤ë‹ˆëŠ” ìŒì‹ ì´ëª¨ì§€
            textSize(40);
            for (let i = 0; i < 8; i++) {
                let x = (frameCount * 0.5 + i * 60) % (width + 100) - 50;
                let y = 100 + sin(frameCount * 0.03 + i) * 30 + i * 50;
                let emojis = ['ğŸ•', 'ğŸ”', 'ğŸ—', 'ğŸŸ', 'ğŸŒ­', 'ğŸ©', 'ğŸ¦', 'ğŸ§'];
                text(emojis[i], x, y);
            }

            // íƒ€ì´í‹€ (ë¬´ì§€ê°œ íš¨ê³¼)
            textSize(52);
            for (let i = 0; i < 6; i++) {
                let c = color(COLORS.rainbow[(i + floor(frameCount * 0.1)) % 6]);
                fill(red(c), green(c), blue(c), 100);
                text('ğŸ” ë¨¹ë°© ê²Œì„ ğŸ•', width/2 + i - 3, height/4 + i - 3);
            }
            fill(255);
            text('ğŸ” ë¨¹ë°© ê²Œì„ ğŸ•', width/2, height/4);

            // ë¶€ì œëª©
            textSize(18);
            fill(255, 255, 255, 200);
            text('ìŒì‹ì„ ë¨¹ê³  í­íƒ„ì„ í”¼í•´ë¼!', width/2, height/4 + 60);

            // ì‹œì‘ ë²„íŠ¼ (í™”ë ¤í•œ íš¨ê³¼)
            drawFancyButton('ğŸ® ê²Œì„ ì‹œì‘', startBtn.x, startBtn.y, startBtn.w, startBtn.h, '#4ecdc4', '#26de81');

            // ì¢…ë£Œ ë²„íŠ¼
            drawFancyButton('ğŸšª ì¢…ë£Œ', quitBtn.x, quitBtn.y, quitBtn.w, quitBtn.h, '#ff6b6b', '#ee5a24');

            // ì¡°ì‘ë²•
            textSize(16);
            fill(255, 255, 255, 200);
            text('â† â†’ ë°©í–¥í‚¤ ë˜ëŠ” A D í‚¤ë¡œ ì´ë™', width/2, height - 100);
            text('SPACE ë˜ëŠ” ë²„íŠ¼ í´ë¦­ìœ¼ë¡œ ì‹œì‘', width/2, height - 75);

            // ì•„ì´í…œ ì„¤ëª…
            textSize(14);
            fill(255, 255, 255, 180);
            text('ğŸ•+10  ğŸ”+20  ğŸ—+30  â­+100  ğŸ’£ìœ„í—˜!', width/2, height - 40);
        }

        function drawFancyButton(label, x, y, w, h, color1, color2) {
            // ë²„íŠ¼ ê·¸ë¦¼ì
            noStroke();
            fill(0, 0, 0, 50);
            rect(x - w/2 + 5, y - h/2 + 5, w, h, 20);

            // ë²„íŠ¼ ë³¸ì²´ (ê·¸ë¼ë°ì´ì…˜ íš¨ê³¼)
            let hovered = mouseX > x - w/2 && mouseX < x + w/2 &&
                         mouseY > y - h/2 && mouseY < y + h/2;

            let c1 = color(color1);
            let c2 = color(color2);

            if (hovered) {
                c1 = lerpColor(c1, color(255), 0.2);
                c2 = lerpColor(c2, color(255), 0.2);
            }

            // ê·¸ë¼ë°ì´ì…˜
            for (let i = 0; i < h; i++) {
                let inter = map(i, 0, h, 0, 1);
                let c = lerpColor(c1, c2, inter);
                stroke(c);
                line(x - w/2 + 10, y - h/2 + i, x + w/2 - 10, y - h/2 + i);
            }

            // í…Œë‘ë¦¬
            noFill();
            stroke(255, 255, 255, 150);
            strokeWeight(3);
            rect(x - w/2, y - h/2, w, h, 20);

            // í…ìŠ¤íŠ¸
            noStroke();
            fill(255);
            textSize(h * 0.4);
            text(label, x, y);

            // ë°˜ì§ì´ íš¨ê³¼
            if (hovered) {
                fill(255, 255, 255, 100 + sin(frameCount * 0.2) * 50);
                rect(x - w/2 + 5, y - h/2 + 5, w - 10, h/3, 15);
            }
        }

        function drawGame() {
            drawAnimatedBackground();

            // ë°”ë‹¥ (ê·¸ë¼ë°ì´ì…˜)
            for (let i = 0; i < 50; i++) {
                let inter = map(i, 0, 50, 0, 1);
                let c = lerpColor(color('#2d3436'), color('#636e72'), inter);
                stroke(c);
                line(0, height - 50 + i, width, height - 50 + i);
            }

            // ë°”ë‹¥ í•˜ì´ë¼ì´íŠ¸
            stroke(255, 255, 255, 50);
            strokeWeight(2);
            line(0, height - 50, width, height - 50);

            // ì•„ì´í…œ ê·¸ë¦¬ê¸°
            textSize(ITEM_SIZE);
            for (let item of items) {
                // ì•„ì´í…œ ê·¸ë¦¼ì
                fill(0, 0, 0, 50);
                noStroke();
                ellipse(item.displayX + 3, item.y + 3, ITEM_SIZE * 0.8);

                // ì•„ì´í…œ íšŒì „ íš¨ê³¼
                push();
                translate(item.displayX, item.y);
                rotate(sin(item.wobble) * 0.1);
                text(item.emoji, 0, 0);
                pop();
            }

            // í”Œë ˆì´ì–´ ê·¸ë¦¬ê¸°
            drawPlayer();

            // HUD ê·¸ë¦¬ê¸°
            drawHUD();

            // íŒŒí‹°í´
            drawParticles();
        }

        function drawPlayer() {
            // í”Œë ˆì´ì–´ ê·¸ë¦¼ì
            fill(0, 0, 0, 50);
            noStroke();
            ellipse(playerX + 3, height - 87, PLAYER_SIZE * 0.8);

            // í”Œë ˆì´ì–´
            textSize(PLAYER_SIZE);
            text('ğŸ˜‹', playerX, height - 90);

            // í”Œë ˆì´ì–´ ì•„ë˜ í”Œë«í¼ (ê·¸ë¼ë°ì´ì…˜)
            for (let i = 0; i < 12; i++) {
                let inter = map(i, 0, 12, 0, 1);
                let c = lerpColor(color('#6c5ce7'), color('#a29bfe'), inter);
                fill(c);
                noStroke();
                rect(playerX - 35 + i * 0.5, height - 55 + i, 70 - i, 2, 3);
            }

            // í”Œë«í¼ ë¹› íš¨ê³¼
            fill(255, 255, 255, 100);
            rect(playerX - 30, height - 55, 60, 3, 3);
        }

        function drawHUD() {
            // HUD ë°°ê²½ (ë¸”ëŸ¬ íš¨ê³¼)
            noStroke();
            for (let i = 0; i < 60; i++) {
                fill(0, 0, 0, 5);
                rect(0, i * 0.8, width, 1);
            }

            // HUD í•˜ë‹¨ ë¼ì¸
            stroke(255, 255, 255, 30);
            strokeWeight(2);
            line(0, 55, width, 55);

            textSize(20);
            noStroke();

            // ì‹œê°„ (ìƒ‰ìƒ ë³€í™”)
            let timeColor = timeLeft > 10 ? color('#4ecdc4') : color('#ff6b6b');
            if (timeLeft <= 10) {
                timeColor = lerpColor(color('#ff6b6b'), color('#ffd700'), (sin(frameCount * 0.3) + 1) / 2);
            }
            fill(timeColor);
            textAlign(LEFT, CENTER);
            text('â±ï¸ ' + timeLeft + 'ì´ˆ', 15, 28);

            // ì ìˆ˜ (ë°˜ì§ì´ íš¨ê³¼)
            fill(COLORS.score);
            textAlign(CENTER, CENTER);
            let scoreScale = 1 + sin(frameCount * 0.1) * 0.05;
            textSize(20 * scoreScale);
            text('ğŸ† ' + score + 'ì ', width/2, 28);

            // ëª©ìˆ¨ (í•˜íŠ¸ ì• ë‹ˆë©”ì´ì…˜)
            textSize(20);
            fill(COLORS.life);
            textAlign(RIGHT, CENTER);
            let hearts = '';
            for (let i = 0; i < 3; i++) {
                if (i < life) {
                    hearts += 'â¤ï¸';
                } else {
                    hearts += 'ğŸ–¤';
                }
            }
            text(hearts, width - 15, 28);

            // ì¢…ë£Œ ë²„íŠ¼ (ê²Œì„ ì¤‘)
            drawSmallButton('âœ• ì¢…ë£Œ', quitBtnGame.x, quitBtnGame.y, quitBtnGame.w, quitBtnGame.h);
        }

        function drawSmallButton(label, x, y, w, h) {
            let hovered = mouseX > x - w/2 && mouseX < x + w/2 &&
                         mouseY > y - h/2 && mouseY < y + h/2;

            // ë²„íŠ¼ ë°°ê²½
            if (hovered) {
                fill(255, 100, 100, 200);
            } else {
                fill(100, 100, 100, 150);
            }
            noStroke();
            rect(x - w/2, y - h/2, w, h, 10);

            // í…ìŠ¤íŠ¸
            fill(255);
            textAlign(CENTER, CENTER);
            textSize(14);
            text(label, x, y);
        }

        function drawGameOverScreen() {
            drawAnimatedBackground();

            // ì–´ë‘ìš´ ì˜¤ë²„ë ˆì´
            fill(0, 0, 0, 180);
            rect(0, 0, width, height);

            // ì¶•í•˜ íŒŒí‹°í´
            if (frameCount % 10 === 0) {
                createParticles(random(width), random(height/2),
                    COLORS.rainbow[floor(random(6))], 3);
            }
            drawParticles();

            let grade = getGrade();

            // GAME OVER í…ìŠ¤íŠ¸ (ë„¤ì˜¨ íš¨ê³¼)
            textAlign(CENTER, CENTER);
            for (let i = 5; i > 0; i--) {
                fill(255, 100, 100, 50);
                textSize(42 + i * 2);
                text('GAME OVER', width/2, height/6);
            }
            fill(255, 150, 150);
            textSize(42);
            text('GAME OVER', width/2, height/6);

            // ë“±ê¸‰ (í¬ê²Œ + ì• ë‹ˆë©”ì´ì…˜)
            let gradeScale = 1 + sin(frameCount * 0.1) * 0.1;
            textSize(80 * gradeScale);
            text(grade.grade, width/2, height/3 + 10);

            // ì¹­í˜¸
            textSize(28);
            fill(grade.color);
            text(grade.title, width/2, height/2 - 20);

            // ì ìˆ˜
            textSize(24);
            fill(255);
            text('ìµœì¢… ì ìˆ˜: ' + score + 'ì ', width/2, height/2 + 30);

            // ë©”ì‹œì§€
            textSize(18);
            fill(200);
            text('"' + grade.message + '"', width/2, height/2 + 70);

            // ë‹¤ì‹œí•˜ê¸° ë²„íŠ¼
            drawFancyButton('ğŸ”„ ë‹¤ì‹œ í•˜ê¸°', restartBtn.x, restartBtn.y, restartBtn.w, restartBtn.h, '#4ecdc4', '#26de81');

            // ì¢…ë£Œ ë²„íŠ¼
            drawFancyButton('ğŸšª ì¢…ë£Œ', width/2, height - 80, 200, 50, '#ff6b6b', '#ee5a24');

            // ì•ˆë‚´
            textSize(14);
            fill(150);
            text('SPACE ë˜ëŠ” ë²„íŠ¼ í´ë¦­', width/2, height - 35);
        }

        // ============================================
        // ğŸ¹ ì…ë ¥ ì²˜ë¦¬ í•¨ìˆ˜
        // ============================================

        function keyPressed() {
            if (key === ' ') {
                handleStart();
            }
            if (key === 'Escape' || key === 'q' || key === 'Q') {
                if (gameState === 'playing') {
                    gameState = 'start';
                }
            }
        }

        function mousePressed() {
            if (gameState === 'start') {
                // ì‹œì‘ ë²„íŠ¼
                if (isInsideButton(startBtn)) {
                    startGame();
                    return;
                }
                // ì¢…ë£Œ ë²„íŠ¼
                if (isInsideButton(quitBtn)) {
                    // ì°½ ë‹«ê¸° ì‹œë„ (ë³´ì•ˆìƒ ì‘ë™ ì•ˆ í•  ìˆ˜ ìˆìŒ)
                    window.close();
                    // ëŒ€ì•ˆ: ì‹œì‘ í™”ë©´ ìœ ì§€
                    return;
                }
            }
            else if (gameState === 'playing') {
                // ê²Œì„ ì¤‘ ì¢…ë£Œ ë²„íŠ¼
                if (isInsideButton(quitBtnGame)) {
                    gameState = 'start';
                    return;
                }
            }
            else if (gameState === 'gameover') {
                // ë‹¤ì‹œí•˜ê¸° ë²„íŠ¼
                if (isInsideButton(restartBtn)) {
                    startGame();
                    return;
                }
                // ì¢…ë£Œ ë²„íŠ¼
                if (mouseX > width/2 - 100 && mouseX < width/2 + 100 &&
                    mouseY > height - 105 && mouseY < height - 55) {
                    gameState = 'start';
                    return;
                }
            }

            handleStart();
        }

        function isInsideButton(btn) {
            return mouseX > btn.x - btn.w/2 && mouseX < btn.x + btn.w/2 &&
                   mouseY > btn.y - btn.h/2 && mouseY < btn.y + btn.h/2;
        }

        function handleStart() {
            if (gameState === 'start' || gameState === 'gameover') {
                // ë²„íŠ¼ ì˜ì—­ ì™¸ í´ë¦­ ì‹œì—ë§Œ ì‹œì‘
                if (gameState === 'start') {
                    if (!isInsideButton(quitBtn)) {
                        startGame();
                    }
                } else {
                    startGame();
                }
            }
        }
    </script>
</body>
</html>
