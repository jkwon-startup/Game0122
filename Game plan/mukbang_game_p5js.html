<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ” ë¨¹ë°© ê²Œì„ - p5.js</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        h1 {
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            margin-bottom: 10px;
        }
        #game-container {
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .info {
            color: white;
            margin-top: 15px;
            text-align: center;
            background: rgba(255,255,255,0.1);
            padding: 10px 20px;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <h1>ğŸ” ë¨¹ë°© ê²Œì„ ğŸ•</h1>
    <div id="game-container"></div>
    <div class="info">
        <p>âŒ¨ï¸ ì¡°ì‘: â† â†’ ë°©í–¥í‚¤ ë˜ëŠ” A, D í‚¤</p>
    </div>

    <script>
        // ============================================
        // ğŸ® ë¨¹ë°© ê²Œì„ (Mukbang Game) - p5.js ë²„ì „
        // ============================================

        // ğŸ“Š ê²Œì„ ì„¤ì • ìƒìˆ˜
        const CANVAS_WIDTH = 400;
        const CANVAS_HEIGHT = 600;
        const PLAYER_SIZE = 50;
        const PLAYER_SPEED = 8;
        const ITEM_SIZE = 40;
        const GAME_TIME = 60; // ì´ˆ
        const SPAWN_INTERVAL = 800; // ms (0.8ì´ˆ)

        // ğŸ¨ ìƒ‰ìƒ ì„¤ì •
        const COLORS = {
            background: '#1a1a2e',
            ground: '#16213e',
            text: '#ffffff',
            score: '#ffd700',
            life: '#ff6b6b',
            time: '#4ecdc4'
        };

        // ğŸ• ì•„ì´í…œ ì •ì˜
        const ITEM_TYPES = {
            pizza:   { emoji: 'ğŸ•', score: 10,  probability: 40, speed: 3 },
            burger:  { emoji: 'ğŸ”', score: 20,  probability: 30, speed: 4 },
            chicken: { emoji: 'ğŸ—', score: 30,  probability: 20, speed: 5 },
            star:    { emoji: 'â­', score: 100, probability: 5,  speed: 6 },
            bomb:    { emoji: 'ğŸ’£', score: -1,  probability: 5,  speed: 4 }  // -1 = ëª©ìˆ¨ ê°ì†Œ
        };

        // ğŸ† ë“±ê¸‰ ì‹œìŠ¤í…œ
        const GRADES = [
            { min: 500, grade: 'ğŸ‘‘', title: 'ì „ì„¤ì˜ ëŒ€ì‹ê°€', message: 'ë¨¹ë°©ì˜ ì‹ ì´ ê°•ë¦¼í–ˆë‹¤!' },
            { min: 300, grade: 'ğŸ¥‡', title: 'ë¨¹ë°© ìŠ¤íƒ€', message: 'ëŒ€ë‹¨í•´!' },
            { min: 100, grade: 'ğŸ¥ˆ', title: 'ë¨¹ë°© ìœ ë§ì£¼', message: 'ì œë²•ì¸ë°?' },
            { min: 0,   grade: 'ğŸ¥‰', title: 'ë°°ê³ í”ˆ ì´ˆë³´', message: 'ë” ì—´ì‹¬íˆ ë¨¹ì–´ë³´ì!' }
        ];

        // ğŸ“¦ ê²Œì„ ìƒíƒœ ë³€ìˆ˜
        let gameState = 'start'; // 'start', 'playing', 'gameover'
        let score = 0;
        let life = 3;
        let timeLeft = GAME_TIME;
        let playerX;
        let items = [];
        let lastSpawnTime = 0;
        let lastSecondTime = 0;

        // ============================================
        // ğŸ¬ p5.js ê¸°ë³¸ í•¨ìˆ˜
        // ============================================

        function setup() {
            let canvas = createCanvas(CANVAS_WIDTH, CANVAS_HEIGHT);
            canvas.parent('game-container');
            textAlign(CENTER, CENTER);
            playerX = width / 2;
        }

        function draw() {
            background(COLORS.background);

            switch(gameState) {
                case 'start':
                    drawStartScreen();
                    break;
                case 'playing':
                    updateGame();
                    drawGame();
                    break;
                case 'gameover':
                    drawGameOverScreen();
                    break;
            }
        }

        // ============================================
        // ğŸ® ê²Œì„ ë¡œì§ í•¨ìˆ˜
        // ============================================

        function startGame() {
            gameState = 'playing';
            score = 0;
            life = 3;
            timeLeft = GAME_TIME;
            playerX = width / 2;
            items = [];
            lastSpawnTime = millis();
            lastSecondTime = millis();
        }

        function updateGame() {
            // â±ï¸ íƒ€ì´ë¨¸ ì—…ë°ì´íŠ¸
            if (millis() - lastSecondTime >= 1000) {
                timeLeft--;
                lastSecondTime = millis();
                if (timeLeft <= 0) {
                    gameState = 'gameover';
                    return;
                }
            }

            // ğŸ¹ í‚¤ë³´ë“œ ì…ë ¥ ì²˜ë¦¬
            if (keyIsDown(LEFT_ARROW) || keyIsDown(65)) { // â† ë˜ëŠ” A
                playerX -= PLAYER_SPEED;
            }
            if (keyIsDown(RIGHT_ARROW) || keyIsDown(68)) { // â†’ ë˜ëŠ” D
                playerX += PLAYER_SPEED;
            }

            // ğŸš§ í™”ë©´ ê²½ê³„ ì²˜ë¦¬
            playerX = constrain(playerX, PLAYER_SIZE/2, width - PLAYER_SIZE/2);

            // ğŸ• ì•„ì´í…œ ìƒì„±
            if (millis() - lastSpawnTime >= SPAWN_INTERVAL) {
                spawnItem();
                lastSpawnTime = millis();
            }

            // ğŸ“¦ ì•„ì´í…œ ì—…ë°ì´íŠ¸ ë° ì¶©ëŒ ê°ì§€
            for (let i = items.length - 1; i >= 0; i--) {
                let item = items[i];
                
                // ì•„ì´í…œ ì´ë™
                item.y += item.speed;

                // ì¶©ëŒ ê°ì§€
                if (checkCollision(item)) {
                    if (item.type === 'bomb') {
                        life--;
                        // ğŸ’¥ í­íƒ„ ì´í™íŠ¸ (í™”ë©´ ê¹œë¹¡ì„)
                        if (life <= 0) {
                            gameState = 'gameover';
                            return;
                        }
                    } else {
                        score += item.score;
                    }
                    items.splice(i, 1);
                    continue;
                }

                // í™”ë©´ ë°–ìœ¼ë¡œ ë‚˜ê°„ ì•„ì´í…œ ì‚­ì œ
                if (item.y > height + ITEM_SIZE) {
                    items.splice(i, 1);
                }
            }
        }

        function spawnItem() {
            let itemType = getRandomItemType();
            let itemData = ITEM_TYPES[itemType];
            
            items.push({
                type: itemType,
                emoji: itemData.emoji,
                score: itemData.score,
                speed: itemData.speed,
                x: random(ITEM_SIZE, width - ITEM_SIZE),
                y: -ITEM_SIZE
            });
        }

        function getRandomItemType() {
            let rand = random(100);
            let cumulative = 0;
            
            for (let type in ITEM_TYPES) {
                cumulative += ITEM_TYPES[type].probability;
                if (rand < cumulative) {
                    return type;
                }
            }
            return 'pizza'; // ê¸°ë³¸ê°’
        }

        function checkCollision(item) {
            // AABB ì¶©ëŒ ê°ì§€
            let playerLeft = playerX - PLAYER_SIZE/2;
            let playerRight = playerX + PLAYER_SIZE/2;
            let playerTop = height - 80 - PLAYER_SIZE/2;
            let playerBottom = height - 80 + PLAYER_SIZE/2;

            let itemLeft = item.x - ITEM_SIZE/2;
            let itemRight = item.x + ITEM_SIZE/2;
            let itemTop = item.y - ITEM_SIZE/2;
            let itemBottom = item.y + ITEM_SIZE/2;

            return playerRight > itemLeft && 
                   playerLeft < itemRight && 
                   playerBottom > itemTop && 
                   playerTop < itemBottom;
        }

        function getGrade() {
            for (let g of GRADES) {
                if (score >= g.min) return g;
            }
            return GRADES[GRADES.length - 1];
        }

        // ============================================
        // ğŸ¨ í™”ë©´ ê·¸ë¦¬ê¸° í•¨ìˆ˜
        // ============================================

        function drawStartScreen() {
            // ë°°ê²½ ê·¸ë¼ë°ì´ì…˜ íš¨ê³¼
            for (let i = 0; i < height; i++) {
                let inter = map(i, 0, height, 0, 1);
                let c = lerpColor(color('#1a1a2e'), color('#16213e'), inter);
                stroke(c);
                line(0, i, width, i);
            }

            // íƒ€ì´í‹€
            textSize(48);
            fill(COLORS.score);
            text('ğŸ” ë¨¹ë°© ê²Œì„ ğŸ•', width/2, height/3);

            // ë¶€ì œëª©
            textSize(18);
            fill(COLORS.text);
            text('ìŒì‹ì„ ë¨¹ê³  í­íƒ„ì„ í”¼í•´ë¼!', width/2, height/3 + 50);

            // ì‹œì‘ ë²„íŠ¼
            let btnY = height/2 + 30;
            drawButton('ğŸ® ê²Œì„ ì‹œì‘', width/2, btnY);

            // ì¡°ì‘ë²•
            textSize(14);
            fill(200);
            text('â† â†’ ë°©í–¥í‚¤ ë˜ëŠ” A D í‚¤ë¡œ ì´ë™', width/2, height - 100);
            text('SPACE ë˜ëŠ” í´ë¦­ìœ¼ë¡œ ì‹œì‘', width/2, height - 70);

            // ì•„ì´í…œ ì„¤ëª…
            textSize(12);
            let descY = height - 40;
            text('ğŸ•+10  ğŸ”+20  ğŸ—+30  â­+100  ğŸ’£ëª©ìˆ¨-1', width/2, descY);
        }

        function drawButton(label, x, y) {
            // ë²„íŠ¼ ë°°ê²½
            fill(100, 100, 200);
            stroke(150, 150, 255);
            strokeWeight(3);
            rectMode(CENTER);
            rect(x, y, 180, 50, 25);
            
            // ë²„íŠ¼ í…ìŠ¤íŠ¸
            noStroke();
            fill(255);
            textSize(20);
            text(label, x, y);
        }

        function drawGame() {
            // ë°”ë‹¥
            fill(COLORS.ground);
            noStroke();
            rect(0, height - 40, width, 40);

            // ì•„ì´í…œ ê·¸ë¦¬ê¸°
            textSize(ITEM_SIZE - 5);
            for (let item of items) {
                text(item.emoji, item.x, item.y);
            }

            // í”Œë ˆì´ì–´ ê·¸ë¦¬ê¸°
            textSize(PLAYER_SIZE);
            text('ğŸ˜‹', playerX, height - 80);

            // í”Œë ˆì´ì–´ ì•„ë˜ í”Œë«í¼
            fill(100, 100, 150);
            rectMode(CENTER);
            rect(playerX, height - 50, 60, 10, 5);

            // HUD ê·¸ë¦¬ê¸°
            drawHUD();
        }

        function drawHUD() {
            // HUD ë°°ê²½
            fill(0, 0, 0, 150);
            noStroke();
            rectMode(CORNER);
            rect(0, 0, width, 50);

            textSize(18);
            
            // ì‹œê°„
            fill(COLORS.time);
            textAlign(LEFT, CENTER);
            text('â±ï¸ ' + timeLeft + 'ì´ˆ', 15, 25);

            // ì ìˆ˜
            fill(COLORS.score);
            textAlign(CENTER, CENTER);
            text('ğŸ† ' + score + 'ì ', width/2, 25);

            // ëª©ìˆ¨
            fill(COLORS.life);
            textAlign(RIGHT, CENTER);
            let hearts = 'â¤ï¸'.repeat(life) + 'ğŸ–¤'.repeat(3 - life);
            text(hearts, width - 15, 25);
        }

        function drawGameOverScreen() {
            // ì–´ë‘ìš´ ì˜¤ë²„ë ˆì´
            fill(0, 0, 0, 200);
            rectMode(CORNER);
            rect(0, 0, width, height);

            let grade = getGrade();

            // GAME OVER í…ìŠ¤íŠ¸
            textSize(36);
            fill(255, 100, 100);
            textAlign(CENTER, CENTER);
            text('GAME OVER', width/2, height/4);

            // ë“±ê¸‰
            textSize(60);
            fill(255);
            text(grade.grade, width/2, height/3 + 30);

            // ì¹­í˜¸
            textSize(24);
            fill(COLORS.score);
            text(grade.title, width/2, height/2);

            // ì ìˆ˜
            textSize(20);
            fill(255);
            text('ìµœì¢… ì ìˆ˜: ' + score + 'ì ', width/2, height/2 + 50);

            // ë©”ì‹œì§€
            textSize(16);
            fill(200);
            text('"' + grade.message + '"', width/2, height/2 + 90);

            // ë‹¤ì‹œí•˜ê¸° ë²„íŠ¼
            drawButton('ğŸ”„ ë‹¤ì‹œ í•˜ê¸°', width/2, height - 120);

            // ì•ˆë‚´
            textSize(14);
            fill(150);
            text('SPACE ë˜ëŠ” í´ë¦­ìœ¼ë¡œ ì¬ì‹œì‘', width/2, height - 70);
        }

        // ============================================
        // ğŸ¹ ì…ë ¥ ì²˜ë¦¬ í•¨ìˆ˜
        // ============================================

        function keyPressed() {
            if (key === ' ') {
                handleStart();
            }
        }

        function mousePressed() {
            handleStart();
        }

        function handleStart() {
            if (gameState === 'start' || gameState === 'gameover') {
                startGame();
            }
        }
    </script>
</body>
</html>
